<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">

<!-- 	<resultMap id="boardResultMap" type="boardVO"> -->
<!--     		<id property="bd_no" column="bd_no"/> -->
<!-- 			<result property="bd_title" column="bd_title"/> -->
<!-- 			<result property="bd_content" column="bd_content"/> -->
<!-- 			<result property="bd_date" column="bd_date"/> -->
<!-- 			<result property="bd_hit" column="bd_hit"/> -->
<!-- 			<result property="bd_pass" column="bd_pass"/> -->
<!-- 			<result property="bd_sequence" column="bd_sequence"/> -->
<!-- 			<result property="bd_group" column="bd_group"/> -->
<!-- 			<result property="bd_depth" column="bd_depth"/> -->
<!-- 			<result property="bd_division" column="bd_division"/> -->
<!-- 			<result property="mem_no" column="mem_no"/> -->
<!-- 			<result property="rnum" column="rnum"/> -->
<!-- 			<result property="bd_writer" column="bd_writer"/> -->
<!-- 			<collection property="items" column="bd_no" select="board_file.board_fileList" ofType="board_fileVO" javaType="java.util.List"></collection> -->
<!--     </resultMap> -->
	
<!-- 	<select id="fileSequence" resultType="String"> -->
<!-- 		SELECT BOARD_SEQ.CURRVAL FROM DUAL -->
<!-- 	</select> -->
	
	<select id="boardInfo" parameterType="map" resultType="boardVO">
		SELECT *
		FROM BOARD
		WHERE BD_NO = #{bd_no}
	</select>
	
	<select id="totalCount" parameterType="map" resultType="String">
		SELECT COUNT(BD_NO)
		FROM BOARD
	</select>

	<select id="boardList" resultType="boardVO" parameterType="map" >
		SELECT ROWNUM RNUM, A.*
		  FROM (SELECT *
              	FROM BOARD
              	WHERE BD_DIVISION = #{bd_division}
		ORDER BY BD_NO DESC)A
	</select>
	
	<delete id="deleteBoardInfo" parameterType="String" >
		DELETE FROM BOARD
		WHERE BD_NO = #{bd_no}
	</delete>
	
	<update id="updateBoardInfo" parameterType="boardVO" >
		UPDATE BOARD
		   SET BD_TITLE   = #{bd_title},
	 		   BD_CONTENT = #{bd_content},
			   MEM_NO     = 1
		 WHERE BD_NO      = #{bd_no}			
	</update>
	

	<insert id="insertBoardInfo" parameterType="boardVO" useGeneratedKeys="true" keyColumn="bd_no" keyProperty="bd_no">
		INSERT INTO BOARD (bd_no,
						   bd_title,
						   bd_date,
	 					   bd_content,
		                   mem_no,
		                   bd_division.
		                   bd_hit
						   )
				   VALUES (bd_seq.nextval,
						   #{bd_title},
						   SYSDATE,
	 					   #{bd_content},
	 					   1,
	 					   #{bd_division},
	 					   0
						   )
	</insert>
	
	<update id="countHit" parameterType="String">
		UPDATE BOARD SET BD_HIT = BD_HIT+1
		WHERE BD_NO = #{bd_no}
	</update>
</mapper>