<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="deal">

	<insert id="insertDeal" parameterType="dealVO">
      INSERT 
         INTO deal
            (
               deal_no,
               deal_name,
               deal_price,
               deal_kind,
               deal_img,
               deal_date,
               deal_fix_revenue,
               deal_fix_expenditure,
               mem_no,
               deal_option,
               deal_division)
         VALUES
             (
               deal_seq.nextval,      
               #{deal_name},   
               #{deal_price},
               #{deal_kind},
               #{deal_img},
               #{deal_date},
               #{deal_fix_revenue},
               #{deal_fix_expenditure},
               #{mem_no},
               #{deal_option},
               #{deal_division}
               )
         
   </insert>
   
   <select id="dealList" resultType="dealVO" parameterType="String">
		SELECT *
		FROM deal
		WHERE MEM_NO = #{mem_no}
	</select>

	<select id="dealListView" resultType="dealVO" parameterType="map">
		SELECT B.*
			FROM(SELECT A.*, ROWNUM RNUM
					FROM(SELECT DEAL.*
					FROM DEAL
					WHERE MEM_NO = #{mem_no}
				ORDER BY DEAL_NO
				)A
			)B
			<![CDATA[
				WHERE B.RNUM <= #{startCount}
				AND B.RNUM >= #{endCount}
	        ]]>	
	      ORDER BY DEAL_NO DESC 
	</select>
	
	
	 <select id="cardList" resultType="cardVO" parameterType="String">
		SELECT *
		FROM card
		WHERE MEM_NO = #{mem_no}
		ORDER BY CARD_NO
		
	</select>
	
	
	<insert id="registCard" parameterType="cardVO">
      INSERT 
         INTO card
            (
               card_no,
               mem_no,
               card_kind)
         VALUES
             (
               card_seq.nextval,      
               #{mem_no},
               #{card_kind}
               )
         
   </insert>
   
   <delete id="deleteCard" parameterType="String">
   	 DELETE 
      FROM CARD
      WHERE CARD_NO = #{card_no}
   </delete>
	
	
</mapper>    

